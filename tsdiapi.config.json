{
  "name": "dboptions",
  "description": "A TSDIAPI plugin to extend Prisma functionality with dynamic database options.",
  "variables": [
    {
      "name": "DBOPTIONS_AUTO_REGISTER_CONTROLLERS",
      "type": "boolean",
      "default": true,
      "configurable": true,
      "description": "Automatically register controllers",
      "inquirer": {
        "type": "confirm",
        "message": "Do you want to enable automatic controller registration?",
        "default": true
      }
    }
  ],
  "prisma": {
    "required": true,
    "scripts": [
      {
        "when": "DBOPTIONS_AUTO_REGISTER_CONTROLLERS == true",
        "command": "ADD MODEL DbOption ({id String @id @default(cuid()) | name String @unique | value Json});",
        "description": "Add the DbOption model to the Prisma schema"
      }
    ]
  },
  "files": [
    {
      "source": "files/src/*.ts",
      "destination": "src/",
      "isHandlebarsTemplate": true
    }
  ],
  "generators": [
    {
      "name": "feature",
      "description": "Generate a feature folder for database options",
      "args": [
        {
          "name": "entityName",
          "description": "The name of the entity that will store the options",
          "inquirer": {
            "type": "input",
            "message": "Enter the name of the entity that will store the options",
            "default": "Option"
          }
        }
      ],
      "files": [
        {
          "source": "files/src/*.ts",
          "destination": "src/",
          "isRoot": true,
          "isHandlebarsTemplate": true
        },
        {
          "source": "generators/feature/*.*",
          "destination": "[name]",
          "overwrite": false,
          "isHandlebarsTemplate": true
        }
      ],
      "fileModifications": [
        {
          "path": "prisma/schema.prisma",
          "mode": "append",
          "isHandlebarsTemplate": true,
          "match": "model\\s+{{pascalCase entityName}}\\s*\\{",
          "expected": false,
          "content": "model {{pascalCase entityName}} {\n  id        String   @id @default(cuid())\n  name      String   @unique\n  value     Json\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}"
        }
      ],
      "requiredPaths": [
        "prisma/schema.prisma"
      ],
      "postMessages": [
        "‚úÖ Feature {{name}} generated successfully!",
        "‚ö†Ô∏è Please ensure to run the necessary database migrations and verify the Prisma database connection. This is the user's responsibility."
      ],
      "afterGenerate": {
        "command": "npx prisma generate"
      }
    }
  ],
  "preMessages": [
    "üëã Welcome to the TSDIAPI dboptions plugin configuration!"
  ],
  "postMessages": [
    "‚úÖ Plugin successfully installed!",
    "‚ö†Ô∏è Please ensure to run the necessary database migrations and verify the Prisma database connection. This is the user's responsibility."
  ]
}